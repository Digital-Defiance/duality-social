## Frontend React Application

References: `/apps/duality-social-react`, `/apps/duality-social-react-e2e`

The main frontend React application that provides the user interface for the Duality Social platform is located in the `/apps/duality-social-react/src` directory. This application includes the following key components and functionality:

- The [`App`](/apps/duality-social-react/src/app/app.tsx#L9) component is the main entry point of the application and handles user authentication, navigation, and routing. It uses the [`useState`](/apps/duality-social-react/src/app/app.tsx#L1) and [`useEffect`](/apps/duality-social-react/src/app/app.tsx#L1) hooks to manage the authentication state of the user, and the [`getToken()`](/apps/duality-social-react/src/utils/auth.ts#L3) and [`verifyToken()`](/apps/duality-social-react/src/utils/auth.ts#L7) functions from the [`auth`](/apps/duality-social-react/src/utils/auth.ts#L0) module to retrieve and verify the user's authentication token.

- The [`Feed`](/apps/duality-social-react/src/components/Feed.scss#L0) component uses the [`useEffect`](/apps/duality-social-react/src/app/app.tsx#L1) hook to check if the user is authenticated and fetch the user's profile information, including the [`defaultDepth`](/libs/duality-social-lib/src/lib/interfaces/profile.ts#L26) setting. It then uses the [`fetchPosts`](/apps/duality-social-react/src/components/Feed.tsx#L28) function to fetch the user's feed of posts from the backend API, using the [`defaultDepth`](/libs/duality-social-lib/src/lib/interfaces/profile.ts#L26) value to determine the depth of the feed. The [`Post`](/apps/duality-social-queue-worker/src/main.ts#L10) component is used to render each individual post in the feed.

- The [`Post`](/apps/duality-social-queue-worker/src/main.ts#L10) component receives a [`post`](/apps/duality-social-node/src/services/feed.ts#L439) prop of type [`IFeedPost`](/libs/duality-social-lib/src/lib/interfaces/feedPost.ts#L3), which contains the [`inputViewpoint`](/apps/duality-social-node/src/services/feed.ts#L456) and [`aiViewpoint`](/apps/duality-social-node/src/services/openai.ts#L270) properties. It uses the [`getSortedViewpoints()`](/apps/duality-social-react/src/components/Post.tsx#L12) function to sort the viewpoints based on their [`rank`](/libs/duality-social-lib/src/lib/interfaces/feedViewpoint.ts#L2) property, or randomly if the [`rank`](/libs/duality-social-lib/src/lib/interfaces/feedViewpoint.ts#L2) is undefined for both viewpoints. The component uses the [`useState`](/apps/duality-social-react/src/app/app.tsx#L1) hook to manage the state of the [`viewpoints`](/libs/duality-social-lib/src/lib/interfaces/post.ts#L9) array and the [`collapsed`](/apps/duality-social-react/src/components/Post.tsx#L21) boolean, which determines whether the viewpoints are expanded or collapsed. The [`toggleCollapse()`](/apps/duality-social-react/src/components/Post.tsx#L23) function is called when the user clicks the "Expand" or "Collapse" button, updating the [`collapsed`](/apps/duality-social-react/src/components/Post.tsx#L21) state.

- The [`UserProfile`](/apps/duality-social-react/src/components/UserProfile.tsx#L4) component uses several utility functions from the [`auth`](/apps/duality-social-react/src/utils/auth.ts#L0) module to handle user authentication and fetch the user's profile details. It has three state variables: [`user`](/libs/duality-social-lib/src/lib/schemas/user.ts#L39), [`isAuthenticated`](/apps/duality-social-react/src/app/app.tsx#L10), and [`isLoading`](/apps/duality-social-react/src/components/UserProfile.tsx#L7). In the [`useEffect`](/apps/duality-social-react/src/app/app.tsx#L1) hook, the component checks if a valid authentication token is present and calls the [`fetchUserProfile`](/apps/duality-social-react/src/components/Feed.tsx#L16) function to fetch the user's details.

The `/apps/duality-social-react/src/utils` directory provides important utility functions and mappings that support the core functionality of the Duality Social React application, particularly in the areas of authentication and reaction handling. The [`auth.ts`](/apps/duality-social-react/src/utils/auth.ts#L0) file provides functions to handle user authentication, such as retrieving and verifying JWT tokens, and extracting user details from the token. The [`reactions.ts`](/libs/duality-social-lib/src/lib/reactions.ts#L0) file defines a mapping between the [`DefaultReactionsTypeEnum`](/libs/duality-social-lib/src/lib/enumerations/defaultReactionsType.ts#L2) and their corresponding emoji representations.

The `/apps/duality-social-react/src/interfaces` directory contains TypeScript interface definitions that provide a consistent and type-safe way to work with the various data structures and configurations used throughout the Duality Social React application, such as the [`IEnvironment`](/apps/duality-social-node/src/interfaces/environment.ts#L3) interface.

The `/apps/duality-social-react/src/app` directory contains the main entry point and core functionality of the Duality Social React application, including the [`App`](/apps/duality-social-react/src/app/app.tsx#L9) component and its associated unit tests.
